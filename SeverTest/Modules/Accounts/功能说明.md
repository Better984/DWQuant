# Accounts 模块功能说明

## 功能概述
- 负责用户注册、登录、改密、注销等账户生命周期能力。
- 提供 JWT 生成与 Token 缓存校验（基于 IDistributedCache/Redis）。
- 登录支持 `system` 维度单会话：同一用户在同一 `system`（如 web / pc / game）下仅保留一个有效 token，新登录会挤下同类型旧会话。
- 提供交易相关设置能力（如沙盒模式开关）。

## 主要入口
- 控制器：`Controllers/AuthController.cs`、`Controllers/TradingSettingsController.cs`
- 服务/仓储：`Application/JwtService.cs`、`Application/AuthTokenService.cs`、`Application/VerificationCodeService.cs`、`Infrastructure/AccountRepository.cs`

## 联动关系
- `Shared`：使用通用 `BaseController`、`ApiResponse`、协议封装与中间件能力。
- `WebSockets`：握手鉴权时由 `Program.cs` 调用 `AuthTokenService` 校验 token；登录替换时通过 `AccountSessionKickService` 按 `userId+system` 广播并踢掉旧连接。
- `AdminBroadcast`/`Notifications`/`ExchangeApiKeys` 等：通过 `AccountRepository` 获取用户信息或角色。
