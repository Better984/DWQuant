# Planet 模块功能说明

## 功能概述
- 提供「星球」社区基础能力，支持用户发布帖子并绑定一个或多个策略。
- 支持帖子内容元素：标题、正文、图片列表、策略绑定列表。
- 支持互动能力：点赞、踩、收藏、评论。
- 支持作者管理：删除帖子、设置帖子公开/隐藏。
- 支持作者数据看板：查看自己帖子的点赞量、踩量、收藏量、评论量，以及点赞用户列表。
- 支持通过帖子查看绑定策略详情与历史开仓记录（来自 `strategy_position`）。

## 主要入口
- 控制器：`Controllers/PlanetController.cs`
- 服务：`Application/PlanetService.cs`
- 仓储：`Infrastructure/PlanetRepository.cs`
- 领域 DTO：`Domain/PlanetDtos.cs`

## 对外接口
- `POST /api/planet/posts/create`（`planet.post.create`）：创建帖子。
- `POST /api/planet/posts/update`（`planet.post.update`）：更新帖子（作者本人）。
- `POST /api/planet/posts/delete`（`planet.post.delete`）：删除帖子（作者本人，软删除）。
- `POST /api/planet/posts/visibility`（`planet.post.visibility`）：设置帖子可见性（`public` / `hidden`）。
- `POST /api/planet/posts/list`（`planet.post.list`）：帖子列表，支持 `scope=square/mine/favorite`。
- `POST /api/planet/posts/detail`（`planet.post.detail`）：帖子详情（含评论、绑定策略详情、历史开仓）。
- `POST /api/planet/posts/react`（`planet.post.react`）：点赞/踩/取消互动（`like`/`dislike`/`none`）。
- `POST /api/planet/posts/favorite`（`planet.post.favorite`）：收藏/取消收藏。
- `POST /api/planet/posts/comment/create`（`planet.post.comment.create`）：发表评论。
- `POST /api/planet/posts/owner/stats`（`planet.post.owner.stats`）：作者帖子互动统计与点赞用户列表。
- `POST /api/planet/image/upload`（`planet.image.upload`）：上传帖子图片（表单上传，返回 OSS URL）。

## 可见性与权限规则
- 公开帖（`public`）：所有登录用户可见、可互动。
- 隐藏帖（`hidden`）：仅作者本人可见、可管理；他人不可见。
- 帖子编辑/删除/可见性切换：仅作者本人允许。
- 帖子绑定策略：仅允许绑定当前用户自己的 `user_strategy`。

## 联动关系
- `Accounts`：用于鉴权与用户昵称/头像展示。
- `StrategyManagement`：用于读取绑定策略基础信息与配置版本。
- `Positions`：复用 `strategy_position` 查询策略历史开仓记录。
- `Shared`：复用协议封装、数据库基础设施与 OSS 服务。
